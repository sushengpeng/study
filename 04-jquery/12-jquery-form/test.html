<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
    <form enctype="multipart/form-data" id="form1" method="post" action="">
        文件:
        <input type="file" name="upfile" id="upfile"><input type="button" id="upimage" value="图片上传1">
        <input type="text" name="im1" id="im1" value="" />
    </form>
    <div id="ln"></div>
    <script src="js/jquery.js"></script> 
    <script src="js/jquery.form.min.js"></script>

    <script>
        $(function () {
            $("#upimage").on("click", function () {
                if ($("#upfile").val() == "") {
                    alert("请选择一个图片文件,再点击");
                    return;
                }
                $("#form1").ajaxSubmit({
                    url: "test.php",
                    type: "POST",
                    // data:"upfile=upfile",
                    success: function (response) {
                        alert(response);
                        $("#ln").empty();
                        $("#ln").append("<img src='./upload/" + response +
                            "' width='100' height='60'/>");
                        $("#im1").val(response);
                    },
                    error: function (msg) {
                        alert("出错了");
                    }
                });
        });
        });
    </script>
</body>

</html>