<!DOCTYPE html>
<html lang="en" manifest="manifest.manifest">
<head>
    <meta charset="UTF-8">
    <title>APP CACHE</title>
    <link rel="stylesheet" type="text/css" href="test.css">
</head><!-- text/cache-mainfest  -->
<body>
    <img src="image/1.jpg">
    <img src="image/2.jpg">
    <a href="666.html">666</a>
    <script type="text/javascript">
        // window.addEventListener('load', function(e){
        //     console.log(window.applicationCache.status);
        // })

        //避免手动刷新两次
        window.addEventListener('load', function (e) {
            window.applicationCache.addEventListener('updateready', function (e) {
                if (window.applicationCache.status == window.applicationCache.UPDATEREADY) {
                    // 调用applicationCache.swapCache()即可将原缓存换成新缓存。
                    window.applicationCache.swapCache();
                    window.location.reload();
                }
            }, false);
        }, false);

    </script>
</body>
</html>
